# í”„ë¡œì íŠ¸ ë§ˆë¬´ë¦¬

> **ì›ë³¸ í¬ìŠ¤íŠ¸ ID**: 194
> **ë°œí–‰ì¼**: 2025-06-17 16:59:02
> **ì¹´í…Œê³ ë¦¬**: project/ì›¹ê°œë°œ

## ğŸ“ ì›ë¬¸ ë‚´ìš©

**ì˜í™” ë¦¬ë·° ì‚¬ì´íŠ¸ ì£¼ì†Œ ë§Œë“¤ê¸°**

* * *

ì˜í™”ë¦¬ë·° ë©”ì¸ í˜ì´ì§€ì¸ main.html íŒŒì¼ì˜ ì½”ë“œë¥¼ views í´ë”ì˜ main.ejs íŒŒì¼ë¡œ ì˜®ê²¨ì˜µë‹ˆë‹¤

![](./img/194_img.png)

ì£¼ì†Œ ë¼ìš°í„°ì— index.ejs ê·¸ë¦¼ íŒŒì¼ì„ ë‚´ë³´ë‚´ê³  ìˆì—ˆë‹¤ë©´ main.ejs ê·¸ë¦¼ íŒŒì¼ì„ ë‚´ë³´ëƒ…ë‹ˆë‹¤.

router.get("/", function(req,res){

res.render('main',{title:"ì˜í™” ë¦¬ë·° ì‚¬ì´íŠ¸"})

})

ì‹¤ì œë¡œ ëŒì•„ê°€ëŠ”ì§€ í™•ì¸

![](./img/194_img_1.png)

ì˜¤ë¥˜ê°€ ë‚˜ë„¤ìš”

main.ejs íŒŒì¼ ë¬¸ì œì¸ê±°ê°™ìŠµë‹ˆë‹¤.

<link rel="stylesheet" href="/public/main.css" />

![](./img/194_img_2.png)

app.use(helmet());

ì´ê²Œ ë§‰ëŠ”ê±° ê°™ìŠµë‹ˆë‹¤.

ì£¼ì„ì²˜ë¦¬ í•˜ê² ìŠµë‹ˆë‹¤.

helmetì€ ë³´ì•ˆì •ì±…ì´ ì‹¬í•œê²ƒê°™êµ°ìš”

<https://www.npmjs.com/package/helmet>

[ helmet help secure Express/Connect apps with various HTTP headers. Latest version: 8.1.0, last published: 3 months ago. Start using helmet in your project by running `npm i helmet`. There are 5806 other projects in the npm registry using helmet. www.npmjs.com ](https://www.npmjs.com/package/helmet)

ì´ ì£¼ì†Œì— ë“¤ì–´ê°€ë³´ë©´ í•„ìš”í•œ ë³´ì•ˆì •ì±…ë“¤ë§Œ êº¼ë‚´ì„œ ì‚¬ìš©í•´ ë³¼ ìˆ˜ ìˆë‹¤

// app.use(helmet());

ê·¸ë¦¬ê³  ë˜ ì´ë¯¸ì§€ íŒŒì¼ì´ë‚˜ ê°€ì ¸ì˜¬ íŒŒì¼ì˜ ìœ„ì¹˜ë„ ìˆ˜ì •í•´ì¤˜ì•¼í•œë‹¤.

<img src="/public/logo.png" width="30" height="30" class="d-inline-block align-top" alt="" loading="lazy">

![](./img/194_img_3.png)

router.get("/", function(req,res){

res.render('main',{title:"ì˜í™” ë¦¬ë·° ì‚¬ì´íŠ¸"})

})

ì•ì„œ ì´ëŸ°ì‹ìœ¼ë¡œ tilteì„ ë„˜ê²¼ëŠ”ë° main.ejsíŒŒì¼ì—ì„œ ë°›ì•„ì„œ ì œëª©ìœ¼ë¡œ ë°”ê¿”ì¤ì‹œë‹¤.

<title><%= locals.title %></title>

![](./img/194_img_4.png)

** ë¦¬ë·° ì €ì¥ API ë§Œë“¤ê¸°**

* * *

![](./img/194_img_5.png)

ì˜í™” API ë³µìŠµ
    
    
    $.ajax({
            type: 'POST',
            url: '/api/reviews',
            contentType: 'application/json',
            data: JSON.stringify(review),
            success: function () {
              alert('í›„ê¸° ì €ì¥ ì™„ë£Œ!');
            },
            error: function () {
              alert('ì €ì¥ ì‹¤íŒ¨');
            }
          });
        }

ì´ëŸ°ì‹ìœ¼ë¡œ ajaxë¥¼ ì‚¬ìš©í•´ ë‚¨ì˜ ì„œë²„ë¥¼ ì—°ê²°í•´ì„œ í›„ê¸°ë³´ê¸°ë²„íŠ¼ í›„ê¸° ì“°ê¸° ë²„íŠ¼ í•¨ìˆ˜ 2ê°œê°€ ì‹¤í–‰ì´ ë˜ê³  ë‚´ê°€ ì“´ ëŒ“ê¸€ì´ ì˜¬ë¼ê°€ëŠ” ì¼ë ¨ì˜ ê³¼ì •ì…ë‹ˆë‹¤.ì´ë•Œ ì € ì˜í™” ê³ ìœ ì˜ idë¥¼ í†µí•´ ì•Œë§ì€ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.

**mainRouter.js ìˆ˜ì •**

* * *

ì¼ë‹¨ ë¦¬ë·°ì‘ì„± ëŒ“ê¸€ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” SQL íŒŒì¼ í•˜ë‚˜ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.

![](./img/194_img_6.png)

module.exports = function(sequelize, DataTypes){

return sequelize.define('reviews',{

idx: {

type:DataTypes.INTEGER,

autoIncrement:true,

primaryKey:true,

allwNull:false

},

movie_id: {

type:DataTypes.STRING(250)

},

review:{

type:DataTypes.TEXT

}

})

}

db.jsì— ì•Œë ¤ì£¼ê¸°

db.reviews = sequelize.import(__dirname + "/reviews.js");

mainRouter.js ìˆ˜ì •í•˜ê¸°

router.post("/review/create", function(req,res){

let movie_id = req.body.movie_id;

let review = req.body.review;

  


db.reviews.create({

movie_id:movie_id,

review:review

}).then(function(result){

res.send({success:200})

})

})

ì´ì œ ì™¸ë¶€ apië¡œ ë¦¬ë·°ë¥¼ ë°›ì•„ì™”ë˜ê±¸ ìˆ˜ì •í•˜ë©´ ë©ë‹ˆë‹¤.

$.ajax({

url: `/reviews/create`, // í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ì„ ë³´ë‚¼ ì„œë²„ì˜ URL ì£¼ì†Œ

data: {

movie_id:target_movie,

review:review

success:function(json){

console.log(json)

ë°‘ì— í™•ì¸ì´ ê°€ëŠ¥í•˜ê²Œ console í•¨ìˆ˜ë„ ë„£ì–´ì¤ë‹ˆë‹¤.

postmanì—ì„œ í™•ì¸í•´ë³´ê¸°

![](./img/194_img_7.png)

ì˜ë³´ë‚´ì§€ê¸´í•˜ì§€ë§Œ ì´ëŸ°ì‹ìœ¼ë¡œë§Œ í•˜ê³  ê·¸ë§Œ ë‘”ë‹¤ë©´ valueê°’ì´ ë¹„ì–´ìˆë˜ 0ì´ë˜ successê°€ ëœ°êº¼ë‹ˆê¹Œ ìˆ˜ì •í•´ì¤ì‹œë‹¤.

if(movie_id == '' || movie_id == 0){

res.send({success:400})

}else{

db.reviews.create({

movie_id:movie_id,

review:review

}).then(function(result){

res.send({success:200})

})

}

})

ì¡°ê±´ë¬¸ìœ¼ë¡œ ì˜ëª»ëœê±°ëŠ” 400ì´ë‚˜500 ì˜ë˜ë©´ 200ì„ ë³´ë‚´ì£¼ëŠ”ê±¸ í”„ë¡ íŠ¸ê°œë°œìí•œí…Œ ì•Œë ¤ì£¼ê²Œ í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ì‚¬ìš©ìí•œí…Œë„ ì•Œë ¤ì¤˜ì„œ ë‹¤ì‹œ ì‹œë„í•˜ê²Œë” main.ejsë„ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤.

if(json.success == 200){

console.log("ì €ì¥ì´ ì˜ëœ ê²½ìš°")

}else if(json.success == 400){

alert("ë­”ê°€ ì˜ëª»ëë‹¤. ë°ì´í„°ê°€ ì´ìƒí•˜ë‹¤")

}

},

![](./img/194_img_8.png) ![](./img/194_img_9.png)

**ë¦¬ë·° ì½ê¸° API ë§Œë“¤ê¸°**

* * *

GETë°©ì‹ìœ¼ë¡œ ë°›ì„êº¼ë¼ì„œ mainRouter.jsíŒŒì¼ì— ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

router.get("/review/read", function(req,res){

let movie_id = req.query.movie_id;

  


db.reviews.findAll({where:{movie_id:movie_id}}).then(function(result){

res.send({success:200, data:result})

})

  


})

main.ejs íŒŒì¼ì˜ ì£¼ì†Œë„ ë°”ê¿”ì¤ë‹ˆë‹¤.

$.ajax({

url: `/review/read?movie_id=${target_movie}`, // í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ì„ ë³´ë‚¼ ì„œë²„ì˜ URL ì£¼ì†Œ

data: {}, // HTTP ìš”ì²­ê³¼ í•¨ê»˜ ì„œë²„ë¡œ ë³´ë‚¼ ë°ì´í„° POST ë°©ì‹ì—ì„œë§Œ ì‚¬ìš©

type: "GET", // HTTP ìš”ì²­ ë°©ì‹(GET, POST)

success:function(json){

console.log(json)

let reviews = json.data;

for(let i=0; i<reviews.length; i++){

$(".modal-body").append(`<p>${reviews[i].review}</p>`)

}

},

error:function(e){

  


}

})

\

ì´ ì½”ë“œëŠ” GET ë°©ì‹ìœ¼ë¡œ /review/read ì—”ë“œí¬ì¸íŠ¸ì— movie_id ê°’ì„ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ì—¬ í•´ë‹¹ ì˜í™”ì˜ ë¦¬ë·°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

ì´ì œ ì›¹ì‚¬ì´íŠ¸ì—ì„œ í™•ì¸í•´ë´…ì‹œë‹¤.

![](./img/194_img_10.png)

ì´ëŸ°ì‹ìœ¼ë¡œ í›„ê¸°ë³´ê¸°ë²„íŠ¼ì„ ëˆŒë¥´ê²Œ ëœë‹¤ë©´ ì½˜ì†”ì°½ì— objectê°€ í•œê°œë” ëœ¨ëŠ”ê±¸ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•œë²ˆ í›„ê¸°ë¥¼ ì¨ë³´ê² ìŠµë‹ˆë‹¤.

![](./img/194_img_11.png)

ì €ì¥ì´ ì˜ëœ ê²½ìš°ê°€ ì˜ ëœ¹ë‹ˆë‹¤.

![](./img/194_img_12.png)

ê³ ìœ ì— movie_idì— ì˜ ì €ì¥ì´ëœê±°ê°™ìŠµë‹ˆë‹¤.


## ğŸ”— ì œí…”ì¹´ìŠ¤í… ì—°ê²°

### ê´€ë ¨ ê°œë…
- [[]]
- [[]]

### í”„ë¡œì íŠ¸ ì—°ê²°
- [[]]

### í•™ìŠµ í¬ì¸íŠ¸
-

## ğŸ“‹ ì•¡ì…˜ ì•„ì´í…œ
- [ ]
- [ ]

## ğŸ’¡ ê°œì¸ì  í†µì°°



---

**íƒœê·¸**: #projectì›¹ê°œë°œ
**ìƒíƒœ**: ğŸŒ± ì”¨ì•— (ì œí…”ì¹´ìŠ¤í… í†µí•© ëŒ€ê¸°)
**ë³€í™˜ì¼**: 2025-10-07
